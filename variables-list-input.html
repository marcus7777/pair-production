<dom-module id="variables-list-input">
  <template>
    <template is="dom-repeat" items="{{labelList}}" >
      <paper-input label="{{cat('Give me list of ',label,'variables for ',name)}}" value="{{variables}}" pattern="[a-zA-Z]*[a-zA-Z\,]*[a-zA-Z]+" auto-validate  error-message="a ',' separated list "></paper-input>
      <template is="dom-repeat" items="{{variableList}}" >
        <input-save path="{{cat('variable.',label+'.'+item,'.about')}}" label="{{cat('Tell me about ',item,'','')}}" ></input-save>
        <type-selection path="{{cat('variable.',item,'.type')}}" item="{{item}}"></type-selection>
      </template>
    </template>
  </template>
</dom-module> 
<script>
  (function () {
    Polymer({
      is: 'variables-list-input',
      properties:{
        name:  String,
        description: String,
        label:String,
        labelList:{
          computed:"getArray(label)"
        },
        variables: {
          type:String,
          notify:true
        },
        variableList: {
          computed:"getArray(variables)"
        }
      },
      cat (a,b,c,d) {
        return a+b+c+d;
      },
      getArray (s) {
        if (s !== "") return s.split(',');
      }
    });
  })();  
</script>
